# PERF-023: HTTP/2 Server Push for critical assets
# Include in main server block: include /etc/nginx/conf.d/http2-push.conf;
#
# Push the main JS and CSS bundles with the initial HTML response
# so the browser starts downloading before parsing <script> tags.
#
# Note: Update asset paths after each deployment build.

# Main app CSS
http2_push /assets/main.css;

# Main app JS entry
http2_push /assets/main.js;

# Map vendor chunk (deck.gl + maplibre-gl)
http2_push /assets/map.js;

# PERF-041: Cross-Origin-Isolation headers for SharedArrayBuffer
# Uncomment when all external resources support CORS:
# add_header Cross-Origin-Embedder-Policy "require-corp" always;
# add_header Cross-Origin-Opener-Policy "same-origin" always;
